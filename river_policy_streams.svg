<!--
RIVER/STREAM VISUALIZATION: South African Migration Policy Flow 1993-2025
Flowing streams representing policy evolution with confluences and rapids
- Stream width: Intensity/frequency of policy activity
- Stream color: Policy category (migration law, violence, civil society, etc.)
- Merging streams: Policy interactions and convergence
- Rapids/waterfalls: Crisis periods (2008 pogrom, COVID, Dudula)
- Obstacles (rocks): Resistance points and implementation barriers
- Color gradients: Policy direction changes over time
-->

<svg width="842" height="595" viewBox="0 0 842 595" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Stream gradients for different policy categories -->
    <linearGradient id="migrationStream" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1e3a8a;stop-opacity:0.9"/>
      <stop offset="30%" style="stop-color:#3b82f6;stop-opacity:0.8"/>
      <stop offset="70%" style="stop-color:#60a5fa;stop-opacity:0.7"/>
      <stop offset="100%" style="stop-color:#93c5fd;stop-opacity:0.6"/>
    </linearGradient>
    
    <linearGradient id="violenceStream" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#7f1d1d;stop-opacity:0.3"/>
      <stop offset="30%" style="stop-color:#dc2626;stop-opacity:0.8"/>
      <stop offset="70%" style="stop-color:#f87171;stop-opacity:0.9"/>
      <stop offset="100%" style="stop-color:#fca5a5;stop-opacity:0.7"/>
    </linearGradient>
    
    <linearGradient id="civilSocietyStream" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#064e3b;stop-opacity:0.7"/>
      <stop offset="30%" style="stop-color:#059669;stop-opacity:0.8"/>
      <stop offset="70%" style="stop-color:#34d399;stop-opacity:0.8"/>
      <stop offset="100%" style="stop-color:#6ee7b7;stop-opacity:0.7"/>
    </linearGradient>
    
    <linearGradient id="policyDivideStream" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#92400e;stop-opacity:0.6"/>
      <stop offset="30%" style="stop-color:#f59e0b;stop-opacity:0.8"/>
      <stop offset="70%" style="stop-color:#fbbf24;stop-opacity:0.8"/>
      <stop offset="100%" style="stop-color:#fde047;stop-opacity:0.7"/>
    </linearGradient>
    
    <!-- Rapids and turbulence gradients -->
    <radialGradient id="rapids2008" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.9"/>
      <stop offset="30%" style="stop-color:#fbbf24;stop-opacity:0.8"/>
      <stop offset="70%" style="stop-color:#dc2626;stop-opacity:0.7"/>
      <stop offset="100%" style="stop-color:#7f1d1d;stop-opacity:0.3"/>
    </radialGradient>
    
    <radialGradient id="rapidsCOVID" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.8"/>
      <stop offset="50%" style="stop-color:#f59e0b;stop-opacity:0.7"/>
      <stop offset="100%" style="stop-color:#92400e;stop-opacity:0.4"/>
    </radialGradient>
    
    <radialGradient id="rapidsDudula" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.9"/>
      <stop offset="40%" style="stop-color:#dc2626;stop-opacity:0.8"/>
      <stop offset="100%" style="stop-color:#450a0a;stop-opacity:0.5"/>
    </radialGradient>
    
    <!-- Rock/obstacle gradients -->
    <radialGradient id="rockGradient" cx="30%" cy="30%" r="70%">
      <stop offset="0%" style="stop-color:#64748b;stop-opacity:0.9"/>
      <stop offset="70%" style="stop-color:#475569;stop-opacity:0.8"/>
      <stop offset="100%" style="stop-color:#334155;stop-opacity:0.7"/>
    </radialGradient>
    
    <!-- Filters for water effects -->
    <filter id="waterFlow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="2" result="blur"/>
      <feColorMatrix in="blur" type="matrix" 
        values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 0.8 0"/>
    </filter>
    
    <filter id="turbulence" x="-50%" y="-50%" width="200%" height="200%">
      <feTurbulence baseFrequency="0.04" numOctaves="3" result="noise" seed="1"/>
      <feDisplacementMap in="SourceGraphic" in2="noise" scale="3"/>
    </filter>
    
    <!-- Water texture patterns -->
    <pattern id="waterTexture" patternUnits="userSpaceOnUse" width="8" height="8">
      <rect width="8" height="8" fill="#f1f5f9" opacity="0.05"/>
      <path d="M0,4 Q2,2 4,4 T8,4" stroke="#e2e8f0" stroke-width="0.5" fill="none" opacity="0.2"/>
    </pattern>
  </defs>
  
  <!-- Background (representing the landscape) -->
  <defs>
    <linearGradient id="landscapeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a;stop-opacity:1"/>
      <stop offset="60%" style="stop-color:#1e293b;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#334155;stop-opacity:1"/>
    </linearGradient>
  </defs>
  <rect width="842" height="595" fill="url(#landscapeGradient)"/>
  
  <!-- Title -->
  <text x="421" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#f1f5f9">
    Policy Rivers: The Flow of South African Migration Politics 1993-2025
  </text>
  <text x="421" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#94a3b8">
    Stream Width = Policy Intensity | Rapids = Crisis Periods | Confluences = Policy Interactions
  </text>
  
  <!-- Source springs (1993 - Constitutional origin) -->
  <g id="constitutional-spring">
    <ellipse cx="80" cy="120" rx="25" ry="15" fill="url(#migrationStream)" opacity="0.8"/>
    <circle cx="80" cy="120" r="8" fill="#fbbf24" opacity="0.9"/>
    <text x="80" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#f1f5f9">
      1993 CONSTITUTION
    </text>
    <text x="80" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">
      Source Spring
    </text>
  </g>
  
  <!-- Migration & Asylum Law Stream -->
  <g id="migration-law-stream">
    <!-- 1993-2002: Narrow initial flow -->
    <path d="M 80 120 Q 120 125, 160 130 Q 200 135, 240 140" 
          stroke="url(#migrationStream)" stroke-width="12" fill="none" filter="url(#waterFlow)"/>
    
    <!-- 2002: Immigration Act widening -->
    <ellipse cx="240" cy="140" rx="15" ry="8" fill="url(#migrationStream)" opacity="0.9"/>
    <text x="240" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#f1f5f9">
      2002 Immigration Act
    </text>
    
    <!-- 2002-2008: Steady flow with implementation challenges -->
    <path d="M 240 140 Q 280 145, 320 155 Q 360 165, 400 175" 
          stroke="url(#migrationStream)" stroke-width="18" fill="none" filter="url(#waterFlow)"/>
    
    <!-- 2008-2015: Wider flow after crisis -->
    <path d="M 400 175 Q 450 185, 500 200 Q 550 215, 600 230" 
          stroke="url(#migrationStream)" stroke-width="24" fill="none" filter="url(#waterFlow)"/>
    
    <!-- 2015-2025: Continued development -->
    <path d="M 600 230 Q 650 240, 700 250 Q 750 260, 780 270" 
          stroke="url(#migrationStream)" stroke-width="20" fill="none" filter="url(#waterFlow)"/>
  </g>
  
  <!-- Anti-migrant mobilisation Stream (entering from tributary 1994) -->
  <g id="violence-stream">
    <!-- 1994: Small beginning -->
    <ellipse cx="120" cy="200" rx="10" ry="6" fill="url(#violenceStream)" opacity="0.6"/>
    <text x="120" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#94a3b8">
      1994 Start
    </text>
    
    <!-- 1994-2008: Growing tributary -->
    <path d="M 120 200 Q 180 190, 240 185 Q 300 180, 360 175" 
          stroke="url(#violenceStream)" stroke-width="8" fill="none" filter="url(#waterFlow)"/>
    
    <!-- 2008: MAJOR RAPIDS - Pogrom crisis -->
    <ellipse cx="420" cy="190" rx="40" ry="25" fill="url(#rapids2008)" filter="url(#turbulence)"/>
    <circle cx="420" cy="190" r="15" fill="#dc2626" opacity="0.8"/>
    <text x="420" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#fff">
      2008
    </text>
    <text x="420" y="207" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">
      POGROM
    </text>
    <text x="420" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#fbbf24">
      MAJOR RAPIDS
    </text>
    
    <!-- 2008-2015: Increased flow after crisis -->
    <path d="M 460 190 Q 500 195, 540 200 Q 580 205, 620 210" 
          stroke="url(#violenceStream)" stroke-width="16" fill="none" filter="url(#waterFlow)"/>
    
    <!-- 2015: Another set of rapids -->
    <ellipse cx="620" cy="210" rx="20" ry="12" fill="url(#rapids2008)" opacity="0.7"/>
    <text x="620" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#f1f5f9">
      2015 Violence
    </text>
    
    <!-- 2020: COVID rapids -->
    <ellipse cx="720" cy="240" rx="25" ry="15" fill="url(#rapidsCOVID)" filter="url(#turbulence)"/>
    <text x="720" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#fff">
      COVID
    </text>
    <text x="720" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#94a3b8">
      2020 Rapids
    </text>
    
    <!-- 2022: Dudula rapids -->
    <ellipse cx="780" cy="280" rx="30" ry="18" fill="url(#rapidsDudula)" filter="url(#turbulence)"/>
    <text x="780" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#fff">
      DUDULA
    </text>
    <text x="780" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#94a3b8">
      2022 Rapids
    </text>
    
    <!-- Continuation of violence stream -->
    <path d="M 620 210 Q 660 220, 700 230 Q 740 240, 780 250" 
          stroke="url(#violenceStream)" stroke-width="20" fill="none" filter="url(#waterFlow)"/>
  </g>
  
  <!-- Civil Society Counter-mobilisation Stream (1998 start) -->
  <g id="civil-society-stream">
    <!-- 1998: Spring emergence -->
    <ellipse cx="140" cy="350" rx="12" ry="8" fill="url(#civilSocietyStream)" opacity="0.7"/>
    <text x="140" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#f1f5f9">
      1998 Civil Society
    </text>
    <text x="140" y="342" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#94a3b8">
      Formation
    </text>
    
    <!-- 1998-2008: Steady growth -->
    <path d="M 140 350 Q 200 340, 260 335 Q 320 330, 380 325" 
          stroke="url(#civilSocietyStream)" stroke-width="10" fill="none" filter="url(#waterFlow)"/>
    
    <!-- 2008: Major response to pogrom - stream widens significantly -->
    <path d="M 380 325 Q 420 315, 460 310 Q 500 305, 540 300" 
          stroke="url(#civilSocietyStream)" stroke-width="22" fill="none" filter="url(#waterFlow)"/>
    
    <!-- Confluence point where civil society stream meets violence aftermath -->
    <ellipse cx="460" cy="250" rx="20" ry="35" fill="#34d399" opacity="0.4"/>
    <text x="460" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#f1f5f9">
      Response</text>
    <text x="460" y="292" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#f1f5f9">
      Confluence</text>
    
    <!-- 2008-2025: Continued strong flow -->
    <path d="M 540 300 Q 600 290, 660 285 Q 720 280, 780 275" 
          stroke="url(#civilSocietyStream)" stroke-width="18" fill="none" filter="url(#waterFlow)"/>
  </g>
  
  <!-- Anti-Poor vs Pro-Poor Policies Stream -->
  <g id="policy-divide-stream">
    <!-- 1994: Dual nature from start -->
    <ellipse cx="100" cy="280" rx="15" ry="10" fill="url(#policyDivideStream)" opacity="0.7"/>
    <text x="100" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#f1f5f9">
      1994 Policy
    </text>
    <text x="100" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#94a3b8">
      Divide Begins
    </text>
    
    <!-- Stream that splits and merges showing policy contradictions -->
    <path d="M 100 280 Q 150 270, 200 265" 
          stroke="url(#policyDivideStream)" stroke-width="12" fill="none" filter="url(#waterFlow)"/>
    
    <!-- Split into pro-poor and anti-poor streams -->
    <path d="M 200 265 Q 240 255, 280 250" 
          stroke="url(#policyDivideStream)" stroke-width="8" fill="none" filter="url(#waterFlow)"/>
    <path d="M 200 265 Q 240 275, 280 285" 
          stroke="url(#policyDivideStream)" stroke-width="8" fill="none" filter="url(#waterFlow)"/>
    
    <!-- Rocks representing implementation barriers -->
    <ellipse cx="320" cy="268" rx="12" ry="8" fill="url(#rockGradient)"/>
    <text x="320" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#94a3b8">
      Implementation</text>
    <text x="320" y="302" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#94a3b8">
      Barriers</text>
    
    <!-- Streams reunite but remain turbulent -->
    <path d="M 350 250 Q 400 255, 450 260 Q 500 265, 550 270" 
          stroke="url(#policyDivideStream)" stroke-width="14" fill="none" filter="url(#waterFlow)"/>
    
    <!-- Another split during crisis periods -->
    <path d="M 550 270 Q 600 260, 650 255" 
          stroke="url(#policyDivideStream)" stroke-width="7" fill="none" filter="url(#waterFlow)"/>
    <path d="M 550 270 Q 600 280, 650 290" 
          stroke="url(#policyDivideStream)" stroke-width="7" fill="none" filter="url(#waterFlow)"/>
    
    <!-- Final convergence -->
    <path d="M 650 273 Q 700 275, 750 278 Q 780 280, 800 282" 
          stroke="url(#policyDivideStream)" stroke-width="12" fill="none" filter="url(#waterFlow)"/>
  </g>
  
  <!-- Obstacles and resistance points -->
  <g id="obstacles">
    <!-- Major implementation barriers -->
    <ellipse cx="360" cy="160" rx="8" ry="6" fill="url(#rockGradient)"/>
    <ellipse cx="520" cy="180" rx="10" ry="7" fill="url(#rockGradient)"/>
    <ellipse cx="680" cy="200" rx="6" ry="4" fill="url(#rockGradient)"/>
    
    <!-- Bureaucratic obstacles -->
    <ellipse cx="280" cy="190" rx="6" ry="4" fill="url(#rockGradient)" opacity="0.7"/>
    <ellipse cx="580" cy="240" rx="5" ry="3" fill="url(#rockGradient)" opacity="0.7"/>
    
    <text x="280" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="6" fill="#94a3b8">
      Bureaucratic
    </text>
    <text x="280" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="6" fill="#94a3b8">
      Obstacles
    </text>
  </g>
  
  <!-- Year markers along the riverbank -->
  <g id="timeline-markers">
    <line x1="80" y1="80" x2="80" y2="370" stroke="#64748b" stroke-width="1" opacity="0.5"/>
    <text x="75" y="75" text-anchor="end" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">1993</text>
    
    <line x1="240" y1="80" x2="240" y2="320" stroke="#64748b" stroke-width="1" opacity="0.5"/>
    <text x="235" y="75" text-anchor="end" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">2002</text>
    
    <line x1="420" y1="80" x2="420" y2="350" stroke="#64748b" stroke-width="1" opacity="0.5"/>
    <text x="415" y="75" text-anchor="end" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">2008</text>
    
    <line x1="620" y1="80" x2="620" y2="350" stroke="#64748b" stroke-width="1" opacity="0.5"/>
    <text x="615" y="75" text-anchor="end" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">2015</text>
    
    <line x1="780" y1="80" x2="780" y2="350" stroke="#64748b" stroke-width="1" opacity="0.5"/>
    <text x="775" y="75" text-anchor="end" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">2025</text>
  </g>
  
  <!-- Stream confluence indicators -->
  <g id="confluence-markers">
    <circle cx="460" cy="250" r="3" fill="#fbbf24" opacity="0.8"/>
    <text x="480" y="250" font-family="Arial, sans-serif" font-size="8" fill="#94a3b8">
      Violence-Response Confluence
    </text>
    
    <circle cx="650" cy="273" r="2" fill="#fbbf24" opacity="0.8"/>
    <text x="670" y="273" font-family="Arial, sans-serif" font-size="8" fill="#94a3b8">
      Policy Convergence
    </text>
  </g>
  
  <!-- Legend -->
  <g id="river-legend" transform="translate(50, 420)">
    <rect x="0" y="0" width="500" height="130" fill="#1e293b" stroke="#475569" stroke-width="1" rx="5"/>
    <text x="10" y="20" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#f1f5f9">
      River Legend: Policy Stream Dynamics
    </text>
    
    <!-- Stream types -->
    <line x1="20" y1="35" x2="50" y2="35" stroke="url(#migrationStream)" stroke-width="6"/>
    <text x="60" y="40" font-family="Arial, sans-serif" font-size="10" fill="#f1f5f9">Migration &amp; Asylum Law</text>
    
    <line x1="20" y1="50" x2="50" y2="50" stroke="url(#violenceStream)" stroke-width="6"/>
    <text x="60" y="55" font-family="Arial, sans-serif" font-size="10" fill="#f1f5f9">Anti-migrant Mobilisation</text>
    
    <line x1="20" y1="65" x2="50" y2="65" stroke="url(#civilSocietyStream)" stroke-width="6"/>
    <text x="60" y="70" font-family="Arial, sans-serif" font-size="10" fill="#f1f5f9">Civil Society Counter-mobilisation</text>
    
    <line x1="20" y1="80" x2="50" y2="80" stroke="url(#policyDivideStream)" stroke-width="6"/>
    <text x="60" y="85" font-family="Arial, sans-serif" font-size="10" fill="#f1f5f9">Anti-Poor vs Pro-Poor Policies</text>
    
    <!-- Features -->
    <ellipse cx="280" cy="40" rx="12" ry="8" fill="url(#rapids2008)"/>
    <text x="300" y="45" font-family="Arial, sans-serif" font-size="10" fill="#f1f5f9">Rapids (Crisis Events)</text>
    
    <ellipse cx="280" cy="60" rx="8" ry="5" fill="url(#rockGradient)"/>
    <text x="300" y="65" font-family="Arial, sans-serif" font-size="10" fill="#f1f5f9">Obstacles (Implementation Barriers)</text>
    
    <circle cx="285" cy="80" r="3" fill="#fbbf24"/>
    <text x="300" y="85" font-family="Arial, sans-serif" font-size="10" fill="#f1f5f9">Confluences (Policy Interactions)</text>
    
    <text x="10" y="110" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">
      Stream width = Policy intensity/activity level | Flow direction = Temporal progression 1993→2025
    </text>
  </g>
  
  <!-- Annotation callouts -->
  <g id="annotations">
    <line x1="420" y1="130" x2="420" y2="170" stroke="#fbbf24" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="350" y="125" font-family="Arial, sans-serif" font-size="10" fill="#fbbf24" font-weight="bold">
      2008 Crisis Creates Major Rapids
    </text>
    
    <line x1="520" y1="320" x2="480" y2="280" stroke="#34d399" stroke-width="1"/>
    <text x="525" y="320" font-family="Arial, sans-serif" font-size="9" fill="#34d399">
      Civil society stream widens
    </text>
    <text x="525" y="332" font-family="Arial, sans-serif" font-size="9" fill="#34d399">
      in response to violence
    </text>
  </g>
  
  <!-- Data source -->
  <text x="421" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748b">
    Source: SA Migration Policy Analysis | Rivers show policy evolution flow, intensity, and interactions 1993-2025
  </text>
</svg>